name: IP Check Lookup
description: Lookup IP intelligence (geo, ASN/ISP, proxy/VPN/Tor, threat score) via ip-check.io
author: IP Check
runs:
  using: "composite"
  steps:
    - shell: bash
      run: |
        set -euo pipefail
        BASE="${{ inputs.base-url }}"
        if [ -n "${{ inputs.ip }}" ]; then P="/${{ inputs.ip }}"; else P="/${{ inputs.ips }}"; fi
        URL="${BASE%/}${P}?key=${{ inputs['api-key'] }}"
        if [ -n "${{ inputs.fields }}" ]; then URL="$URL&fields=${{ inputs.fields }}"; fi
        RESP=$(curl -sS -H "Accept: application/json" "$URL")
        {
          echo "json<<EOF"
          echo "$RESP"
          echo "EOF"
          echo "summary=OK"
        } >> "$GITHUB_OUTPUT"
branding:
  icon: globe
  color: blue
inputs:
  ip:
    description: Single IP to look up (IPv4 or IPv6)
    required: false
  ips:
    description: Comma-separated list of IPs (max 200)
    required: false
  fields:
    description: Comma-separated list of fields to include (e.g., ip,country,city,asn)
    required: false
  api-key:
    description: Your ip-check.io API key (store as a secret)
    required: true
  base-url:
    description: Override base URL (defaults to https://api.ip-check.io)
    required: false
    default: https://api.ip-check.io
outputs:
  json:
    description: Raw JSON response
  summary:
    description: Short summary string for logs
runs:
  using: node20
  main: index.js
